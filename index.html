<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GitteCharity (Nurtura) ‚Äî Empowering Lives, Nurturing Communities</title>
  <meta name="description" content="GitteCharity (Nurtura) is a volunteer-driven initiative helping with education, food, shelter, and animal welfare. Donate, volunteer, give or claim free items." />
  <meta name="theme-color" content="#4f46e5" />
  <style>
    :root{
      --bg:#0f172a;          /* slate-900 */
      --panel:#111827;       /* gray-900 */
      --panel-2:#0b1022;     /* deeper */
      --muted:#94a3b8;       /* slate-400 */
      --text:#e5e7eb;        /* gray-200 */
      --brand:#4f46e5;       /* indigo-600 */
      --brand-2:#22c55e;     /* green-500 */
      --accent:#f59e0b;      /* amber-500 */
      --danger:#ef4444;      /* red-500 */
      --ok:#10b981;          /* emerald-500 */
      --card:#0b1022cc;      /* translucent */
      --shadow: 0 10px 30px rgb(0 0 0 / 25%);
      --radius: 18px;
      --max-width:1100px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;height:100%;background:var(--bg);color:var(--text);font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Noto Sans,sans-serif}
    a{color:#c7d2fe;text-decoration:none}
    a:hover{text-decoration:underline}
    img{max-width:100%;display:block}
    button{cursor:pointer}
    .container{max-width:var(--max-width);margin-inline:auto;padding:20px}
    .grid{display:grid;gap:16px}
    .grid-3{grid-template-columns:repeat(3,minmax(0,1fr))}

    /* small tweaks for form elements */
    .input,.select,textarea{background:#0b1022;border:1px solid #233047;color:var(--text);padding:10px 12px;border-radius:12px;outline:none;font:inherit}
    .input:focus,.select:focus,textarea:focus{border-color:#3b82f6}

    /* NAV */
    .nav{position:sticky;top:0;z-index:60;background:linear-gradient(180deg, #0b1022f2, #0b102200);backdrop-filter: blur(8px);border-bottom:1px solid rgba(255,255,255,0.02)}
    .nav-inner{display:flex;align-items:center;justify-content:space-between;padding:10px 22px;gap:12px;max-width:var(--max-width);margin:auto}
    .logo{display:flex;align-items:center;gap:12px;min-width:0}
    .logo-badge{width:44px;height:44px;border-radius:12px;display:grid;place-items:center;background:linear-gradient(135deg,var(--brand),#8b5cf6);box-shadow:var(--shadow)}
    .logo-badge svg{width:28px;height:28px}
    .nav-links{display:flex;align-items:center;gap:8px;flex-wrap:wrap}
    .nav-links a{margin:0 8px;color:#e5e7eb;padding:8px;border-radius:10px}
    .menu-toggle{display:none;background:transparent;border:0;color:var(--text);font-size:22px;padding:8px}
    .btn{border:0;border-radius:999px;padding:10px 16px;background:var(--brand);color:white;box-shadow:var(--shadow);font-weight:600}
    .btn.secondary{background:#1f2937}
    .btn.ghost{background:transparent;border:1px solid #334155}
    .badge{display:inline-block;padding:2px 8px;border-radius:999px;background:#1f2937;border:1px solid #334155;font-size:12px;color:#cbd5e1}

    /* HERO */
    .hero{position:relative;min-height:62vh;display:grid;place-items:center;overflow:hidden}
    .hero video,.hero .bg{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;filter:brightness(0.35)}
    .hero .overlay{position:relative;text-align:center;padding:28px}
    .hero h1{font-size:clamp(26px,5vw,44px);line-height:1.05;margin:0 0 12px}
    .pill{display:inline-flex;align-items:center;gap:8px;background:#1f2937;border:1px solid #334155;color:#cbd5e1;border-radius:999px;padding:6px 12px;font-size:14px}

    /* SECTION */
    section{padding:26px 0;border-top:1px solid #0b122a}
    h2{font-size:clamp(20px,2.4vw,26px);margin:0 0 8px}
    .muted{color:var(--muted)}
    .card{background:var(--card);border:1px solid #1e293b;border-radius:var(--radius);padding:16px;box-shadow:var(--shadow)}

    /* MARKET */
    .toolbar{display:flex;flex-wrap:wrap;gap:10px;align-items:center;margin-bottom:12px}
    .item{display:flex;gap:12px;align-items:flex-start}
    .item img{width:120px;height:100px;border-radius:12px;object-fit:cover;border:1px solid #1f2937}
    .item .meta{flex:1}
    .price{color:#a7f3d0}

    /* CART */
    .cart-toggle{position:fixed;right:20px;bottom:20px;z-index:60}
    .cart-panel{position:fixed;inset:0 0 0 auto;width:min(420px,90vw);background:#0a0f22;border-left:1px solid #1f2937;box-shadow:var(--shadow);transform:translateX(102%);transition:.28s;z-index:70;display:flex;flex-direction:column}
    .cart-panel.open{transform:translateX(0)}
    .cart-header{display:flex;align-items:center;justify-content:space-between;padding:14px 18px;border-bottom:1px solid #1f2937}
    .cart-body{flex:1;overflow:auto;padding:14px}
    .cart-item{display:flex;gap:12px;border-bottom:1px solid #1f2937;padding:10px 0}
    .cart-item img{width:64px;height:64px;border-radius:10px;object-fit:cover}

    /* DONATION QR WIDGET */
    .donate-widget{position:fixed;right:20px;bottom:90px;background:#0a0f22;border:1px solid #1f2937;border-radius:16px;box-shadow:var(--shadow);padding:14px;width:300px;display:none;z-index:65}
    .donate-widget.open{display:block}

    /* OWNER PANEL */
    .owner-btn{position:fixed;left:20px;bottom:20px;z-index:60}
    dialog{border:none;border-radius:16px;background:#0a0f22;color:var(--text);padding:0;box-shadow:var(--shadow)}
    dialog .dialog-inner{padding:14px;min-width:min(520px,92vw)}
    .table{width:100%;border-collapse:collapse}
    .table th,.table td{border-bottom:1px solid #1f2937;padding:8px 6px;text-align:left}

    /* FOOTER */
    footer{padding:24px 0;color:#a5b4fc;text-align:center;border-top:1px solid #0b122a}

    /* small helpers */
    .muted-small{color:var(--muted);font-size:13px}
    .note{font-size:12px;color:#94a3b8}

    /* ===========================
       RESPONSIVE ADJUSTMENTS
       (stack columns, larger tappable targets,
       hamburger nav, scalable images)
    ============================ */

    /* Nav collapse on small screens */
    @media (max-width:880px){
      .nav-inner{padding:10px 16px}
      .nav-links{display:none}
      .menu-toggle{display:inline-flex}
      .menu-toggle{align-items:center;justify-content:center;padding:8px;border-radius:10px}
      .nav.open .nav-links{display:flex;flex-direction:column;position:absolute;right:16px;top:64px;background:linear-gradient(180deg,#061026cc,#02061266);padding:10px;border-radius:12px;border:1px solid #112233}
      .logo strong{font-size:16px}
    }

    /* Make hero and buttons friendlier on small screens */
    @media (max-width:640px){
      :root{--radius:12px}
      .container{padding:16px}
      .hero{min-height:46vh}
      .hero .overlay{padding:18px}
      .hero h1{font-size:clamp(20px,7vw,34px)}
      .nav-inner{gap:8px}
      .nav-links a{margin:4px 0;padding:10px 14px;display:block}
      .grid{gap:12px}
      .card{padding:12px;border-radius:14px}
      .item{flex-direction:column;align-items:stretch}
      .item img{width:100%;height:auto;max-height:220px;object-fit:cover}
      .toolbar{flex-direction:column;align-items:stretch}
      .toolbar .input,.toolbar .select,.toolbar button{width:100%}
      .cart-panel{width:100vw;right:0;left:0;bottom:0;top:auto;height:60vh;border-left:0;border-top:1px solid #1f2937}
      dialog .dialog-inner{min-width:92vw;padding:12px}
      .donate-widget{width:calc(100% - 40px);right:20px;left:20px;bottom:80px}
      .owner-btn,.cart-toggle{right:16px;left:auto}
      .cart-toggle{bottom:16px}
      .owner-btn{left:16px;bottom:16px}
      .pill{font-size:13px;padding:6px 10px}
      .logo-badge{width:38px;height:38px}
    }

    /* Very small phones */
    @media (max-width:420px){
      .hero h1{font-size:22px}
      .nav-inner{padding:8px}
      .menu-toggle{font-size:20px}
    }

    /* make tables scroll horizontally */
    .table-wrap{overflow:auto}

  </style>
</head>
<body>
  <!-- NAVBAR -->
  <nav class="nav" aria-label="Main navigation">
    <div class="nav-inner">
      <div class="logo" style="gap:10px">
        <div class="logo-badge" aria-label="GitteCharity logo" title="GitteCharity">
          <!-- Heart + Paw inline SVG -->
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path d="M12.1 21s-6.6-4.6-8.6-8.1C1.8 9.6 3 6.2 6 5.3c1.6-.5 3.4.1 4.5 1.4 1-1.3 2.8-1.9 4.5-1.4 3 1 4.3 4.3 2.5 7.6-2 3.5-8.6 8.1-8.6 8.1Z" fill="white"/>
            <circle cx="18.5" cy="6.5" r="2.2" fill="#0ea5e9"/>
          </svg>
        </div>
        <div style="min-width:0">
          <strong style="display:block;line-height:1">GitteCharity</strong>
          <span class="muted-small" style="display:block"> (Nurtura)</span>
        </div>
      </div>

      <button class="menu-toggle" aria-expanded="false" aria-controls="nav-links" title="Open menu" onclick="toggleMenu()">‚ò∞</button>

      <div id="nav-links" class="nav-links" style="display:flex;align-items:center;gap:8px">
        <a href="#home">Home</a>
        <a href="#about">About</a>
        <a href="#market">Free Items</a>
        <a href="#get-involved">Get Involved</a>
        <a href="#animals">Animal Help</a>
        <a href="#contact">Contact</a>
        <button class="btn" onclick="openDonate()">Donate</button>
      </div>
    </div>
  </nav>

  <!-- HERO -->
  <header id="home" class="hero" role="banner">
    <!-- Optional background video: replace src with your own bg.mp4 in repo -->
    <video autoplay muted loop playsinline poster="" onerror="this.style.display='none'">
      <!-- You can replace the below with your own hosted video or remove the <video> entirely -->
      <source src="https://videos.pexels.com/video-files/855293/855293-uhd_2560_1440_30fps.mp4" type="video/mp4" />
    </video>
    <div class="bg" style="background:radial-gradient(60% 60% at 50% 50%, #0b1022 0%, #020617 100%);"></div>
    <div class="overlay container">
      <span class="pill">Global Initiatives ‚Ä¢ Reaching lives across India</span>
      <h1>Empowering Lives, Nurturing Communities</h1>
      <p class="muted">Give or claim essentials for free ‚Äî books, clothes, shoes, school supplies, and more. Delivery charges may apply.</p>
      <div style="margin-top:14px;display:flex;gap:10px;justify-content:center;flex-wrap:wrap">
        <a class="btn" href="#market">Explore Free Items</a>
        <a class="btn secondary" href="#give">Give an Item</a>
      </div>
    </div>
  </header>

  <!-- ABOUT -->
  <section id="about">
    <div class="container grid" style="grid-template-columns:1.2fr .8fr;gap:22px">
      <div class="card">
        <h2>About GitteCharity (Nurtura)</h2>
        <p>GitteCharity is a charitable initiative dedicated to <strong>education</strong>, <strong>food</strong>, <strong>shelter</strong>, and <strong>animal welfare</strong>. We connect donors with people who need essentials ‚Äî ensuring dignity through a simple, transparent and community-driven platform.</p>
        <p class="muted">We are building a safe marketplace where anyone can <em>give</em> an item or <em>claim</em> an item for free. Owners may ask claimants to pay delivery charges only. Cash donations help us expand reach.</p>
        <div class="grid grid-3" style="margin-top:8px">
          <div class="card"><div class="badge">200k+ Impact</div><div class="muted">Target lives supported through our network over time.</div></div>
          <div class="card"><div class="badge">25+ Regions</div><div class="muted">Expanding city by city with local partners.</div></div>
          <div class="card"><div class="badge">100% Free Items</div><div class="muted">Only delivery charges, if needed.</div></div>
        </div>
      </div>
      <div class="card">
        <h2>Quick Actions</h2>
        <div class="grid">
          <button class="btn" onclick="openDonate()">Donate via UPI QR</button>
          <a class="btn secondary" href="#give">List an Item to Give</a>
          <a class="btn secondary" href="#contact">Request Help / Message</a>
          <button class="btn ghost" onclick="openOwner()">Owner / Admin</button>
        </div>
        <p class="note" style="margin-top:10px">Tip: Star &amp; fork this repo to contribute features. Single-file build for GitHub Pages.</p>
      </div>
    </div>
  </section>

  <!-- MARKETPLACE -->
  <section id="market">
    <div class="container">
      <h2>Free Items Marketplace</h2>
      <p class="muted">Claim items for free (pay only delivery if needed). Use filters to find what you need.</p>

      <div class="toolbar" role="search" aria-label="Marketplace filters">
        <input id="search" class="input" placeholder="Search items (e.g., books, shoes, laptop bag)" />
        <select id="category" class="select" aria-label="Category">
          <option value="">All categories</option>
          <option>Books</option>
          <option>Clothes</option>
          <option>Shoes</option>
          <option>Electronics</option>
          <option>School Supplies</option>
          <option>Furniture</option>
          <option>Kitchen</option>
          <option>Other</option>
        </select>
        <select id="city" class="select" aria-label="City">
          <option value="">All cities</option>
          <option>Bengaluru</option>
          <option>Mumbai</option>
          <option>Pune</option>
          <option>Hyderabad</option>
          <option>Delhi</option>
          <option>Chennai</option>
          <option>Other</option>
        </select>
        <button class="btn" onclick="applyFilters()">Filter</button>
        <button class="btn ghost" onclick="resetFilters()">Reset</button>
      </div>

      <div id="items" class="grid" aria-live="polite"></div>

      <div id="give" class="card" style="margin-top:18px">
        <h3 style="margin:0 0 8px">Give an Item</h3>
        <p class="muted" style="margin-top:-6px">List something in good condition to help someone. You can chat with claimant after they request.</p>
        <form id="giveForm" class="grid" style="grid-template-columns:1fr 1fr;gap:12px" onsubmit="addItem(event)">
          <input class="input" required name="title" placeholder="Item title (e.g., Class 10 Science Book)" />
          <select class="select" required name="category">
            <option>Books</option><option>Clothes</option><option>Shoes</option><option>Electronics</option><option>School Supplies</option><option>Furniture</option><option>Kitchen</option><option>Other</option>
          </select>
          <input class="input" required name="city" placeholder="City (e.g., Bengaluru)" />
          <input class="input" name="contact" placeholder="Contact (phone/email optional)" />
          <textarea class="input" style="grid-column:1/-1" name="desc" placeholder="Description, condition, pickup/delivery notes"></textarea>
          <label class="note" style="grid-column:1/-1">Photo (JPG/PNG, will be stored locally in your browser only):</label>
          <input class="input" style="grid-column:1/-1" type="file" accept="image/*" name="photo" />
          <div style="grid-column:1/-1;display:flex;gap:10px;align-items:center;flex-wrap:wrap">
            <label style="display:flex;gap:6px;align-items:center"><input type="checkbox" name="delivery" /> Delivery available (charges may apply)</label>
            <label style="display:flex;gap:6px;align-items:center"><input type="checkbox" name="animal" /> Animal-related item</label>
          </div>
          <button class="btn" style="grid-column:1/-1">Post Item</button>
        </form>
        <p class="note">Privacy: Uploaded images and items are saved in <strong>your</strong> browser (LocalStorage) on this device. To publish globally, push this file to a server with a database later.</p>
      </div>
    </div>
  </section>

  <!-- ANIMAL HELP -->
  <section id="animals">
    <div class="container grid" style="grid-template-columns:1fr 1fr">
      <div class="card">
        <h2>Animal Help</h2>
        <p class="muted">Report an animal in need or list supplies for shelters. We connect nearby volunteers.</p>
        <form id="animalForm" onsubmit="submitAnimal(event)" class="grid" style="grid-template-columns:1fr 1fr;gap:12px">
          <input class="input" required name="title" placeholder="e.g., Dog food, Cat litter, Rescue request" />
          <input class="input" required name="city" placeholder="City" />
          <textarea class="input" style="grid-column:1/-1" name="desc" placeholder="Details, location, time"></textarea>
          <input class="input" style="grid-column:1/-1" name="contact" placeholder="Your contact (optional)" />
          <button class="btn" style="grid-column:1/-1">Submit Animal Help</button>
        </form>
      </div>
      <div class="card">
        <h3 style="margin:0 0 8px">Recent Animal Posts</h3>
        <div id="animalList" class="grid"></div>
      </div>
    </div>
  </section>

  <!-- GET INVOLVED -->
  <section id="get-involved">
    <div class="container grid" style="grid-template-columns:1fr 1fr;gap:22px">
      <div class="card">
        <h2>Volunteer / Intern</h2>
        <p class="muted">Contribute time or skills‚Äîlogistics, design, outreach, engineering. Remote and on-ground roles.</p>
        <form id="volForm" onsubmit="submitMessage(event, 'volunteers')" class="grid" style="grid-template-columns:1fr 1fr;gap:12px">
          <input class="input" required name="name" placeholder="Full Name" />
          <input class="input" required name="phone" placeholder="Phone" />
          <input class="input" style="grid-column:1/-1" name="email" placeholder="Email (optional)" />
          <select class="select" name="role" style="grid-column:1/-1">
            <option>General Volunteer</option>
            <option>Delivery / Pickup</option>
            <option>Campus Ambassador</option>
            <option>Animal Rescue</option>
            <option>Frontend Developer</option>
            <option>Backend Developer</option>
            <option>Designer</option>
          </select>
          <textarea class="input" style="grid-column:1/-1" name="msg" placeholder="Tell us how you'd like to help"></textarea>
          <button class="btn" style="grid-column:1/-1">Submit</button>
        </form>
      </div>
      <div class="card">
        <h2>Contact / Request Help</h2>
        <p class="muted">Ask for books, school supplies, household essentials, or general help. We'll reach out.</p>
        <form id="contactForm" onsubmit="submitMessage(event, 'messages')" class="grid" style="grid-template-columns:1fr 1fr;gap:12px">
          <input class="input" required name="name" placeholder="Your Name" />
          <input class="input" required name="phone" placeholder="Phone" />
          <textarea class="input" style="grid-column:1/-1" name="msg" placeholder="What do you need? (be specific)"></textarea>
          <button class="btn" style="grid-column:1/-1">Send Message</button>
        </form>
      </div>
    </div>
  </section>

  <!-- CONTACT & INFO -->
  <section id="contact">
    <div class="container grid" style="grid-template-columns:1fr 1fr 1fr;gap:22px">
      <div class="card">
        <h2>Global Initiatives</h2>
        <p class="muted">We aim to reach individuals across India and beyond through partnerships with schools, shelters and NGOs.</p>
        <ul>
          <li>Learning kits for students</li>
          <li>Community food drives</li>
          <li>Emergency support for families</li>
          <li>Animal rescue & foster network</li>
        </ul>
      </div>
      <div class="card">
        <h2>Official Contact</h2>
        <p>Phone / UPI: <strong>9860191711</strong></p>
        <p>Email: <a href="mailto:contact@gittecharity.org">contact@gittecharity.org</a> (placeholder)</p>
        <p class="note">Add your real email in this file when ready.</p>
      </div>
      <div class="card">
        <h2>Transparency</h2>
        <p class="muted">Open, community-driven and privacy-respecting. This MVP stores data locally in your browser only. To accept public listings across users, connect a simple backend later (Firebase/Supabase).</p>
      </div>
    </div>
  </section>

  <!-- DONATION WIDGET (floating) -->
  <div id="donateWidget" class="donate-widget" role="dialog" aria-modal="true" aria-hidden="true">
    <h3 style="margin:0 0 8px">Donate via UPI</h3>
    <p class="note">Choose your UPI provider and generate a QR. Amount is optional.</p>
    <div class="grid" style="grid-template-columns:1fr 1fr;gap:8px;margin-bottom:10px">
      <select id="upiProvider" class="select" aria-label="UPI Provider">
        <option value="@ybl">PhonePe (@ybl)</option>
        <option value="@axl">Google Pay (@axl)</option>
        <option value="@oksbi">Google Pay (@oksbi)</option>
        <option value="@okhdfcbank">GPay/HDFC (@okhdfcbank)</option>
        <option value="@okaxis">GPay/Axis (@okaxis)</option>
        <option value="@paytm">Paytm (@paytm)</option>
      </select>
      <input id="upiAmount" class="input" type="number" min="1" step="1" placeholder="Amount (‚Çπ)" />
      <input id="upiNote" class="input" style="grid-column:1/-1" placeholder="Note (optional)" />
    </div>
    <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap">
      <button class="btn" onclick="makeUpiQR()">Generate QR</button>
      <button class="btn secondary" onclick="openDonate(false)">Close</button>
    </div>
    <div id="qrWrap" style="margin-top:12px;text-align:center"></div>
    <p class="note" style="margin-top:8px">If QR doesn't open in your app, send to UPI number <strong>9860191711</strong> manually.</p>
  </div>

  <button class="btn cart-toggle" onclick="toggleCart()" aria-expanded="false" aria-controls="cartPanel">üß∫ Cart <span id="cartCount" class="badge">0</span></button>
  <button class="btn owner-btn" onclick="openOwner()">üîê Owner</button>

  <!-- CART PANEL -->
  <aside id="cartPanel" class="cart-panel" aria-labelledby="cartTitle" aria-hidden="true">
    <div class="cart-header">
      <strong id="cartTitle">Your Cart (free items)</strong>
      <div>
        <button class="btn ghost" onclick="toggleCart()">Close</button>
      </div>
    </div>
    <div class="cart-body" id="cartItems"></div>
    <div style="padding:12px;border-top:1px solid #1f2937">
      <form id="checkoutForm" onsubmit="checkout(event)" class="grid" style="grid-template-columns:1fr 1fr;gap:10px">
        <input class="input" required name="name" placeholder="Your Name" />
        <input class="input" required name="phone" placeholder="Phone" />
        <textarea class="input" style="grid-column:1/-1" name="address" placeholder="Address / Pickup preference"></textarea>
        <button class="btn" style="grid-column:1/-1">Request Claim</button>
      </form>
      <p class="note">We will connect you with donors. Items are free; delivery charges may apply.</p>
    </div>
  </aside>

  <!-- OWNER / ADMIN DIALOG -->
  <dialog id="ownerDialog" aria-labelledby="ownerTitle">
    <div class="dialog-inner">
      <form id="ownerLogin" onsubmit="ownerAuth(event)" class="grid" style="grid-template-columns:1fr 1fr;gap:10px">
        <h3 id="ownerTitle" style="grid-column:1/-1;margin:0">Owner / Admin</h3>
        <input class="input" required name="pin" placeholder="Enter PIN (default: last 4 of phone)" />
        <button class="btn" style="grid-column:1/-1">Enter</button>
      </form>
      <div id="ownerPanel" style="display:none">
        <div class="toolbar" style="margin-top:6px">
          <button class="btn" onclick="exportData()">Export Data (JSON)</button>
          <label class="btn ghost" title="Import data JSON"><input type="file" hidden accept="application/json" onchange="importData(event)" />Import</label>
          <button class="btn secondary" onclick="clearAll()">Clear All (local)</button>
        </div>
        <div class="grid" style="grid-template-columns:1fr 1fr 1fr;gap:12px;margin-top:8px">
          <div class="card">
            <h4 style="margin:0 0 6px">Items</h4>
            <div class="table-wrap"><table class="table" id="ownerItems"></table></div>
          </div>
          <div class="card">
            <h4 style="margin:0 0 6px">Orders / Claims</h4>
            <div class="table-wrap"><table class="table" id="ownerOrders"></table></div>
          </div>
          <div class="card">
            <h4 style="margin:0 0 6px">Messages</h4>
            <div class="table-wrap"><table class="table" id="ownerMsgs"></table></div>
          </div>
        </div>
        <div style="text-align:right;margin-top:10px">
          <button class="btn ghost" onclick="document.getElementById('ownerDialog').close()">Close</button>
        </div>
      </div>
    </div>
  </dialog>

  <footer>
    <div class="container">
      <div>¬© <span id="y"></span> GitteCharity (Nurtura). All Rights Reserved.</div>
      <div style="margin-top:6px" class="note">Built with love ‚Ä¢ Single-file open source ‚Ä¢ <a href="#about">About</a> ‚Ä¢ <a href="#get-involved">Get Involved</a> ‚Ä¢ <a href="#market">Free Items</a></div>
    </div>
  </footer>

  <script>
    /* ==========================================================
     * GitteCharity ‚Äî Single-file static MVP for GitHub Pages
     * Data persists locally in this browser using localStorage.
     * This script preserves all features and adds responsive UI
     * enhancements: mobile menu toggle, responsive panels, etc.
     * ========================================================== */

    const LS_KEYS = {
      ITEMS: 'gc_items',
      CART: 'gc_cart',
      ORDERS: 'gc_orders',
      MSGS: 'gc_messages',
      ANIMALS: 'gc_animals'
    };

    const $ = (sel, p=document) => p.querySelector(sel);
    const $$ = (sel, p=document) => [...p.querySelectorAll(sel)];

    // state loaded from localStorage
    const state = {
      items: load(LS_KEYS.ITEMS, []),
      cart: load(LS_KEYS.CART, []),
      orders: load(LS_KEYS.ORDERS, []),
      messages: load(LS_KEYS.MSGS, []),
      animals: load(LS_KEYS.ANIMALS, [])
    };

    // initialise
    initSamples();
    renderItems();
    renderCart();
    renderAnimals();
    $('#y').textContent = new Date().getFullYear();

    /* ---------- Utils ---------- */
    function save(key, val){ localStorage.setItem(key, JSON.stringify(val)); }
    function load(key, fallback){ try{ return JSON.parse(localStorage.getItem(key)) ?? fallback }catch(e){ return fallback } }
    function id(){ return Math.random().toString(36).slice(2,10) }
    function toast(msg){ try{ if(window.navigator && navigator.vibrate) navigator.vibrate(20); }catch(e){} alert(msg) }

    /* ---------- Mobile menu ---------- */
    function toggleMenu(){
      const nav = document.querySelector('.nav');
      nav.classList.toggle('open');
      const btn = document.querySelector('.menu-toggle');
      const isOpen = nav.classList.contains('open');
      btn.setAttribute('aria-expanded', isOpen?'true':'false');
      // show/hide links container (for aria)
      const links = document.getElementById('nav-links');
      if(isOpen) links.style.display = 'flex';
      else links.style.display = '';
    }
    // Close nav when clicking link on small screens
    document.addEventListener('click', (e) => {
      const btn = document.querySelector('.menu-toggle');
      const nav = document.querySelector('.nav');
      if(nav.classList.contains('open') && e.target.matches('#nav-links a')){
        nav.classList.remove('open');
        btn.setAttribute('aria-expanded','false');
        document.getElementById('nav-links').style.display = '';
      }
    });

    /* ---------- Filters ---------- */
    function applyFilters(){
      renderItems();
    }
    function resetFilters(){
      $('#search').value=''; $('#category').value=''; $('#city').value='';
      renderItems();
    }

    /* ---------- Items ---------- */
    function renderItems(){
      const q = $('#search').value.trim().toLowerCase();
      const cat = $('#category').value; const city = $('#city').value;
      let items = [...state.items].sort((a,b)=>b.ts-a.ts);
      items = items.filter(i => (!q || (i.title+i.desc+i.city).toLowerCase().includes(q)) && (!cat || i.category===cat) && (!city || i.city.toLowerCase()===city.toLowerCase()));
      const wrap = $('#items'); wrap.innerHTML='';
      if(items.length===0){
        const noel = document.createElement('div');
        noel.className = 'card';
        noel.innerHTML = `No items yet. Be the first to <a href="#give">give something</a>!`;
        wrap.appendChild(noel);
        return;
      }
      items.forEach(i=>{
        const el = document.createElement('div');
        el.className = 'card item';
        el.style.alignItems = 'flex-start';
        el.innerHTML = `
          <img src="${i.photo || placeholder(i.category)}" alt="${escapeHtml(i.title)}"/>
          <div class="meta">
            <div style="display:flex;align-items:center;gap:8px;justify-content:space-between">
              <div style="min-width:0">
                <strong>${escapeHtml(i.title)}</strong> <span class="badge">${escapeHtml(i.category)}</span>
                <div class="muted" style="margin-top:4px">${escapeHtml(i.city)}${i.delivery? ' ‚Ä¢ Delivery available':''}</div>
              </div>
              <div class="price">FREE</div>
            </div>
            <div class="muted" style="margin:6px 0 8px">${escapeHtml(i.desc || '')}</div>
            <div style="display:flex;gap:8px;flex-wrap:wrap">
              <button class="btn" onclick='addToCart("${i.id}")'>Add to Cart</button>
              <button class="btn secondary" onclick='shareItem("${i.id}")'>Share</button>
              <button class="btn ghost" onclick='contactDonor("${i.id}")'>Contact Donor</button>
            </div>
          </div>`;
        wrap.appendChild(el);
      })
    }

    function placeholder(cat){
      const m = {
        'Books':'https://images.unsplash.com/photo-1519681393784-d120267933ba?q=80&w=800&auto=format&fit=crop',
        'Clothes':'https://images.unsplash.com/photo-1520975916090-3105956dac38?q=80&w=800&auto=format&fit=crop',
        'Shoes':'https://images.unsplash.com/photo-1542291026-7eec264c27ff?q=80&w=800&auto=format&fit=crop',
        'Electronics':'https://images.unsplash.com/photo-1518779578993-ec3579fee39f?q=80&w=800&auto=format&fit=crop',
        'School Supplies':'https://images.unsplash.com/photo-1588075592446-265fd1e6e76f?q=80&w=800&auto=format&fit=crop',
        'Furniture':'https://images.unsplash.com/photo-1519710164239-da123dc03ef4?q=80&w=800&auto=format&fit=crop',
        'Kitchen':'https://images.unsplash.com/photo-1488900128323-21503983a07e?q=80&w=800&auto=format&fit=crop',
        'Other':'https://images.unsplash.com/photo-1554412933-514a83d2f3c5?q=80&w=800&auto=format&fit=crop'
      };
      return m[cat] || m['Other'];
    }

    async function readFileAsDataURL(file){
      if(!file) return '';
      return await new Promise((res,rej)=>{
        const fr = new FileReader();
        fr.onload = ()=>res(fr.result);
        fr.onerror = rej;
        fr.readAsDataURL(file);
      })
    }

    async function addItem(e){
      // handles both programmatic call or form submit
      if(e && e.preventDefault) e.preventDefault();
      let fd;
      if(e && e.target && e.target instanceof HTMLFormElement) fd = new FormData(e.target);
      else return toast('Invalid form submission');

      const photo = await readFileAsDataURL(fd.get('photo'));
      const item = {
        id:id(),
        title: (fd.get('title') || '').toString().trim(),
        category: (fd.get('category') || '').toString(),
        city: (fd.get('city') || '').toString().trim(),
        contact: (fd.get('contact') || '').toString().trim(),
        desc: (fd.get('desc') || '').toString().trim(),
        delivery: fd.get('delivery')==='on',
        animal: fd.get('animal')==='on',
        photo,
        ts: Date.now()
      }
      state.items.push(item); save(LS_KEYS.ITEMS, state.items);
      if(e && e.target) e.target.reset();
      renderItems(); toast('Item posted locally! (Visible on this device).')
    }

    function addToCart(itemId){
      const item = state.items.find(i=>i.id===itemId);
      if(!item){ toast('Item not found'); return }
      if(state.cart.find(c=>c.id===item.id)){ toast('Already in cart'); return }
      state.cart.push({ ...item, cartTs: Date.now() }); save(LS_KEYS.CART, state.cart); renderCart(); toggleCart(true)
    }

    function renderCart(){
      const out = state.cart.map(c=>{
        return `<div class="cart-item"><img src="${c.photo || placeholder(c.category)}" alt="${escapeHtml(c.title)}"/><div style="flex:1"><div><strong>${escapeHtml(c.title)}</strong></div><div class="muted">${escapeHtml(c.city)} ‚Ä¢ ${escapeHtml(c.category)}</div></div><button class="btn ghost" onclick='removeFromCart("${c.id}")'>Remove</button></div>`
      }).join('') || '<div class="muted">Cart is empty</div>';
      $('#cartItems').innerHTML = out;
      $('#cartCount').textContent = state.cart.length;
    }

    function removeFromCart(id0){ state.cart = state.cart.filter(x=>x.id!==id0); save(LS_KEYS.CART, state.cart); renderCart(); }
    function toggleCart(force){ const p = $('#cartPanel'); p.classList.toggle('open', force ?? !p.classList.contains('open')); const hidden = !p.classList.contains('open'); p.setAttribute('aria-hidden', hidden); document.querySelector('.cart-toggle').setAttribute('aria-expanded', (!hidden).toString()) }

    function checkout(e){
      e.preventDefault();
      if(state.cart.length===0){ toast('Cart is empty'); return }
      const fd = new FormData(e.target);
      const order = {
        id: id(),
        name: (fd.get('name')||'').toString().trim(),
        phone: (fd.get('phone')||'').toString().trim(),
        address: (fd.get('address')||'').toString().trim(),
        items: state.cart.map(({id,title,category,city})=>({id,title,category,city})),
        ts: Date.now(),
        status: 'Requested'
      };
      state.orders.push(order); save(LS_KEYS.ORDERS, state.orders);
      state.cart = []; save(LS_KEYS.CART, state.cart); renderCart(); e.target.reset();
      toast('Request submitted! We will contact you.');
    }

    function contactDonor(id0){
      const it = state.items.find(x=>x.id===id0);
      const c = it?.contact?.trim();
      if(!c){ toast('No contact provided by donor. Add to cart and request claim.'); return }
      if(/@/.test(c)) window.location.href = `mailto:${c}?subject=About your item: ${encodeURIComponent(it.title)}`;
      else window.location.href = `tel:${c}`;
    }

    function shareItem(id0){
      const it = state.items.find(x=>x.id===id0);
      if(!it) return toast('Item not found');
      const url = location.href.split('#')[0];
      const text = `Free on GitteCharity: ${it.title} (${it.city})`;
      if(navigator.share){ navigator.share({title:'GitteCharity', text, url}); }
      else { navigator.clipboard.writeText(`${text} ‚Äî ${url}`).then(()=>toast('Link copied!')) }
    }

    /* ---------- Messages / Volunteers ---------- */
    function submitMessage(e, bucket){
      e.preventDefault();
      const fd = new FormData(e.target);
      const rec = Object.fromEntries(fd.entries());
      rec.id = id(); rec.ts = Date.now();
      state.messages.push({bucket, ...rec});
      save(LS_KEYS.MSGS, state.messages);
      e.target.reset(); toast('Thanks! We will reach out.');
    }

    /* ---------- Animal Help ---------- */
    function submitAnimal(e){
      e.preventDefault();
      const fd = new FormData(e.target);
      const rec = Object.fromEntries(fd.entries());
      rec.id = id(); rec.ts = Date.now();
      state.animals.push(rec); save(LS_KEYS.ANIMALS, state.animals); e.target.reset(); renderAnimals(); toast('Animal post recorded (local).')
    }
    function renderAnimals(){
      const wrap = $('#animalList'); wrap.innerHTML='';
      state.animals.slice().reverse().forEach(a=>{
        const el = document.createElement('div'); el.className='card';
        el.innerHTML = `<strong>${escapeHtml(a.title)}</strong> <span class="badge">${escapeHtml(a.city)}</span><div class="muted">${escapeHtml(a.desc||'')}</div><div class="note">${escapeHtml(a.contact||'')}</div>`;
        wrap.appendChild(el);
      })
    }

    /* ---------- Donate / UPI QR ---------- */
    function openDonate(open=true){ 
      const w = document.getElementById('donateWidget');
      w.classList.toggle('open', open);
      w.setAttribute('aria-hidden', (!open).toString());
      if(open) w.scrollIntoView({behavior:'smooth', block:'center'});
    }
    function makeUpiQR(){
      const suffix = $('#upiProvider').value;
      const amount = $('#upiAmount').value || '';
      const note = $('#upiNote').value || 'Donation to GitteCharity';
      // You can change the handle domain as needed per your wallet
      const vpa = `9860191711${suffix}`; // e.g., 9860191711@ybl / @paytm / @axl
      const params = new URLSearchParams({ pa: vpa, pn: 'GitteCharity', tn: note, cu: 'INR' });
      if(amount) params.set('am', amount);
      const uri = `upi://pay?${params.toString()}`;
      const qrUrl = `https://api.qrserver.com/v1/create-qr-code/?size=260x260&data=${encodeURIComponent(uri)}`;
      $('#qrWrap').innerHTML = `<img alt="UPI QR" src="${qrUrl}" style="margin:auto;border-radius:12px;border:1px solid #1f2937"/><div class="note" style="margin-top:6px">VPA: <code>${vpa}</code></div>`;
    }

    /* ---------- Owner / Admin ---------- */
    function openOwner(){ 
      const dialog = document.getElementById('ownerDialog');
      try{
        dialog.showModal();
      }catch(e){
        // fallback for older browsers
        alert('Owner dialog not supported by your browser ‚Äî please use a modern browser.');
      }
    }
    function ownerAuth(e){
      e.preventDefault();
      const pin = new FormData(e.target).get('pin').trim();
      // Default PIN = last 4 digits of phone used in this project: 1711
      const ok = pin === '1711';
      if(!ok){ toast('Wrong PIN'); return }
      $('#ownerLogin').style.display='none';
      $('#ownerPanel').style.display='block';
      ownerRefresh();
    }

    function ownerRefresh(){
      // Items
      const it = state.items.map(i=>`<tr><td>${escapeHtml(i.title)}</td><td>${escapeHtml(i.city)}</td><td>${escapeHtml(i.category)}</td><td><button class="btn ghost" onclick='delItem("${i.id}")'>Delete</button></td></tr>`).join('') || '<tr><td class="muted">No items</td></tr>';
      $('#ownerItems').innerHTML = `<tr><th>Title</th><th>City</th><th>Category</th><th></th></tr>${it}`;
      // Orders
      const od = state.orders.map(o=>`<tr><td>${escapeHtml(o.name)}</td><td>${escapeHtml(o.phone)}</td><td>${o.items.length} items</td><td>${new Date(o.ts).toLocaleString()}</td></tr>`).join('') || '<tr><td class="muted">No orders</td></tr>';
      $('#ownerOrders').innerHTML = `<tr><th>Name</th><th>Phone</th><th>Count</th><th>Time</th></tr>${od}`;
      // Messages
      const ms = state.messages.map(m=>`<tr><td>${escapeHtml(m.bucket)}</td><td>${escapeHtml(m.name||'')}</td><td>${escapeHtml(m.phone||'')}</td><td>${escapeHtml((m.msg||'').slice(0,60))}</td></tr>`).join('') || '<tr><td class="muted">No messages</td></tr>';
      $('#ownerMsgs').innerHTML = `<tr><th>Type</th><th>Name</th><th>Phone</th><th>Message</th></tr>${ms}`;
    }

    function delItem(id0){ state.items = state.items.filter(i=>i.id!==id0); save(LS_KEYS.ITEMS, state.items); renderItems(); ownerRefresh(); }

    function exportData(){
      const data = {
        items: state.items, cart: state.cart, orders: state.orders, messages: state.messages, animals: state.animals
      };
      const blob = new Blob([JSON.stringify(data, null, 2)], {type:'application/json'});
      const url = URL.createObjectURL(blob);
      const a = Object.assign(document.createElement('a'), {href:url, download:'gittecharity-data.json'});
      a.click(); URL.revokeObjectURL(url);
    }

    function importData(e){
      const f = e.target.files[0]; if(!f) return;
      const reader = new FileReader(); reader.onload = () => {
        try{
          const data = JSON.parse(reader.result);
          state.items = data.items || []; save(LS_KEYS.ITEMS, state.items);
          state.cart = data.cart || []; save(LS_KEYS.CART, state.cart);
          state.orders = data.orders || []; save(LS_KEYS.ORDERS, state.orders);
          state.messages = data.messages || []; save(LS_KEYS.MSGS, state.messages);
          state.animals = data.animals || []; save(LS_KEYS.ANIMALS, state.animals);
          renderItems(); renderCart(); renderAnimals(); ownerRefresh(); toast('Imported!');
        }catch(err){ toast('Invalid JSON') }
      };
      reader.readAsText(f);
    }

    function clearAll(){ if(confirm('Clear all local data?')){ Object.values(LS_KEYS).forEach(k=>localStorage.removeItem(k)); location.reload() } }

    /* ---------- Sample data (first run only) ---------- */
    function initSamples(){
      if(state.items.length) return;
      const samples=[
        {title:'Class 10 Science Book',category:'Books',city:'Bengaluru',desc:'CBSE NCERT, lightly used.',delivery:true},
        {title:'Winter Jackets (2)',category:'Clothes',city:'Pune',desc:'Clean, good condition, adult size M & L.',delivery:false},
        {title:'Sports Shoes Size 8',category:'Shoes',city:'Mumbai',desc:'Barely worn, good grip.',delivery:true},
        {title:'Geometry Box & Notebooks',category:'School Supplies',city:'Hyderabad',desc:'For 1 student, 6 notebooks + box.',delivery:true},
        {title:'Study Table',category:'Furniture',city:'Delhi',desc:'Compact wooden desk.',delivery:false},
        {title:'Rice Cooker',category:'Kitchen',city:'Chennai',desc:'Working perfectly.',delivery:true}
      ];
      state.items = samples.map(s=>({id:id(),photo:'',contact:'',animal:false,ts:Date.now()-Math.random()*9e7,...s}));
      save(LS_KEYS.ITEMS, state.items);
    }

    /* ---------- helpers ---------- */
    function escapeHtml(str){
      if(!str) return '';
      return String(str).replace(/[&<>"'`=\/]/g, function(s){ return ({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;','/':'&#x2F;','`':'&#x60;','=':'&#x3D;' })[s]});
    }

    // close open panels when pressing Escape
    document.addEventListener('keydown', (e)=>{
      if(e.key === 'Escape'){
        const cart = document.getElementById('cartPanel');
        if(cart.classList.contains('open')) toggleCart(false);
        const donate = document.getElementById('donateWidget');
        if(donate.classList.contains('open')) openDonate(false);
        try{ document.getElementById('ownerDialog').close(); }catch(err){}
      }
    });

  </script>
</body>
</html>
